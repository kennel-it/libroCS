<?xml version="1.0" encoding="utf-8" standalone="no"?>
<!DOCTYPE html>
<!-- grafoIndice requires="json" group="javascript" -->
<!-- changelog 2018-02-21 inserita prima parte dei contenuti -->
<html xmlns="http://www.w3.org/1999/xhtml">
   <head>
   	<meta charset="UTF-8"/>
       <title>ElaborazioneJsonClient</title>
       <link type="text/css" rel="stylesheet" href="style.css"/>
       <script type="text/javascript" src="script/test.js"></script>         
   </head>
<body>
<header>
	<h1><img src="immagini/wip.png" alt="lavori in corso"/>ElaborazioneJsonClient</h1>
	<p>gestire una risposta in formato application/json via javascript</p>
</header>
<article>
	<p>Il formato json viene utilizzato anche perché ricostruire un oggetto 
	a partire dalla sua rappresentazione in Javascript è piuttosto facile:
	basta uilizzare il metodo <code>parse()</code> dell'oggetto <code>JSON</code>.</p>
	<p><code>JSON.parse(testo)</code> restituisce un oggetto costruito come specificato
	nella stringa <code>testo</code>.</p>

	<h2>Esempio</h2>
	<p>Quelli qui sotto è un esempio <em>troppo</em> minimale, normalemente il testo viene recuperato
	da una richiesta http e scritto nella pagina non nella console...</p>

<div class="prog">
var messaggioDalServer='{ "nome":"Pluto", "telefoni": ["555-1111","555-2222"] }';
var oggetto = JSON.parse(messaggioDalServer);
console.log(oggetto.telefoni[1]);
</div>
	<div class="test">
	   	<p>Cosa stampa il precedente frammento di programma nella console?</p>
	    <a onclick="sbagliata(this)">Pluto 555-2222<span class="spiegazione">no, il nome non viene stampatohernet</span></a>
	    <a onclick="sbagliata(this)">555-1111<span class="spiegazione">questo sarebbe l'indice zero</span></a> 
	    <a onclick="giusta(this)">555-2222</a> 
	</div>

<div class="prog">
var messaggioDalServer='{ "nome":"Pluto", "telefoni": ["555-1111","555-2222"] }';
var oggetto = JSON.parse(messaggioDalServer);
console.log(oggetto.Pluto);
</div>	
	<div class="test">
	   	<p>Cosa stampa il precedente frammento di programma nella console?</p>
	    <a onclick="sbagliata(this)">nome<span class="spiegazione">no, la proprietà "Pluto" non esiste</span></a>
	    <a onclick="sbagliata(this)">stringa vuota<span class="spiegazione">no, c'è un valore specifico</span></a> 
	    <a onclick="giusta(this)">undefined</a> 
	</div>
	
</article>
</body>
</html>